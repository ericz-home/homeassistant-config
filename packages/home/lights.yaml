lights:
  automation:
    - id: evening_lights
      alias: "Turn on Living Room Lights"
      triggers:
        - trigger: state 
          entity_id:
            - person.eric
            - person.laura
          to: "home"
        - trigger: sun
          event: sunset
          offset: "-00:15:00"
      conditions:
        - alias: "sun down"
          condition: sun
          after: sunset
          after_offset: "-00:15:00"
        - alias: "at home"
          condition: state
          entity_id: input_boolean.home_mode
          state: "on"
        - alias: "not away"
          condition: state
          entity_id: input_boolean.away_mode
          state: "off"
        - alias: "not sleep"
          condition: state
          entity_id: input_boolean.sleep_mode
          state: "off"
      actions:
        - choose:
            - conditions:
                - condition: state
                  entity_id: media_player.sony_xr_75x90j
                  state: "on"
              sequence:
                - action: scene.turn_on
                  target:
                    entity_id: scene.living_room_lo
          default:
            - action: scene.turn_on
              target:
                entity_id: scene.living_room_mid


    - id: sleep_lights
      alias: "Turn Off All Lights"
      triggers:
        - trigger: state
          entity_id: input_boolean.sleep_mode
          from: "off"
          to: "on"
      actions:
        - action: scene.turn_on
          target:
            entity_id: scene.living_room_off
        - action: light.turn_off
          target:
            entity_id: light.bedroom_light

    - id: sleep_mode_on_led
      alias: "Sleep mode ON LED color"
      triggers:
        - trigger: state
          entity_id: input_boolean.sleep_mode
          to: "on"
      actions:
        - action: number.set_value
          data:
            value: 200
          target:
            entity_id:
              - number.bedroom_light_ledcolorwhenon
              - number.bedroom_light_ledcolorwhenoff
    - id: sleep_mode_off_led
      alias: "Sleep mode OFF LED color"
      triggers:
        - trigger: state
          entity_id: input_boolean.sleep_mode
          to: "off"
      actions:
        - action: number.set_value
          data:
            value: 170
          target:
            entity_id:
              - number.bedroom_light_ledcolorwhenon
              - number.bedroom_light_ledcolorwhenoff
