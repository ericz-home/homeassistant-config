- id: unlock_door
  alias: "Unlock the Door"
  triggers:
    - trigger: template
      entity_id: sensor.galaxys24_next_alarm
      value_template: {{ (now() < today_at('8:00')) and (states('sensor.galaxys24_next_alarm') > today_at('23:59') }} 
  conditions:
    - alias: "at home"
      condition: numeric_state
      entity_id: zone.home
      above: 0
    - alias: "door locked"
      not:
        condition: state
        entity_id: lock.front_door_lock
        state: "unlocked"
  actions:
    - action: lock.unlock
      target:
        entity_id: lock.front_door_lock

- id: lock_door
  alias: "Lock the Door"
  triggers:
    - trigger: state
      entity_id: sensor.galaxys24_do_not_disturb_sensor
      not_to: 
        - "off"
        - "unknown"
        - "unavailable"
  conditions:
    - alias: "door unlocked"
      not: 
        condition: state
        entity_id: lock.front_door_lock
        state: "locked"
  actions:
    - action: lock.lock
      target:
        entity_id: lock.front_door_lock

- id: notify_door
  alias: "Notify Front Door Lock"
  triggers:
    - trigger: state
      entity_id: lock.front_door_lock
      not_to: "unavailable"
      not_from: "unavailable" 
  actions:
    - action: notify.send_message
      data:
        entity_id: notify.mobile_app_galaxys24
        message: "Front door is {{ states('lock.front_door_lock') }}."


